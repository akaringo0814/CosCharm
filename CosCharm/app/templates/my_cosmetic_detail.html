{% extends 'base.html' %}

{% block title %}{{ cosmetic_master.cosmetic_name }}の詳細{% endblock %}

{% block content %}
<div class="container-3">
  <style>
    .container-3 {
      display: flex;
      gap: 20px;
      padding: 20px;
    }
    .cosmetic-details {
      flex: 1;
      margin-bottom: 20px;
    }
    .my-make-using-cosmetic {
      flex: 1;
    }
    .cosmetic-image {
      width: 200px;
      height: auto;
      border-radius: 5px;
      object-fit: cover;
      margin-bottom: 10px;
    }
    .make-grid {
      display: flex;
      flex-wrap: wrap;
      gap: 15px;
    }
    .make-item {
      text-align: center;
      width: 300px;
    }
    .post-image {
      width: 200px;
      height: auto;
      border-radius: 5px;
      object-fit: cover;
      margin-bottom: 10px;
    }
    .back-button {
      display: inline-block;
      margin-top: 20px;
      padding: 10px 15px;
      background-color: #007bff;
      color: white;
      text-decoration: none;
      border-radius: 5px;
    }
    .back-button:hover {
      background-color: #0056b3;
    }
  </style>

  <!-- コスメ詳細 -->
  <div class="cosmetic-details">
    <h2>{{ cosmetic_master.cosmetic_name }}の詳細</h2>
    <div>
      {% if cosmetic_master.photo %}
        <img src="{{ cosmetic_master.photo.url }}" alt="{{ cosmetic_master.cosmetic_name }}" class="cosmetic-image">
      {% endif %}
      <p><strong>ブランド名:</strong> {{ cosmetic_master.brand }}</p>
      <p><strong>カテゴリ:</strong> {{ cosmetic_master.get_category_display }}</p>
      <p><strong>サブカテゴリ:</strong> {{ cosmetic_master.get_sub_category_display }}</p>
      {% if my_cosmetic %}
      <p><strong>お気に入り:</strong> {{ my_cosmetic.is_favorite|yesno:"はい,いいえ" }}</p>
      <p><strong>使用状況:</strong> {{ my_cosmetic.get_usage_status_display }}</p>
      {% else %}
      <p>このコスメは登録されていません。</p>
      {% endif %}
    </div>
  </div>

  <!-- このコスメを使用したマイメイク投稿 -->
  <div class="my-make-using-cosmetic">
    <h3>このコスメを使用したマイメイク投稿</h3>
    <div class="make-grid">
      {% for make in my_make_using_cosmetic %}
      <div class="make-item">
        <a href="{% url 'my_make_detail' make.id %}">
          <img src="{{ make.image.url }}" alt="{{ make.make_name }}" class="post-image">
          <p>{{ make.make_name }}</p>
        </a>
      </div>
      {% endfor %}
    </div>
    {% if not my_make_using_cosmetic %}
      <p>このコスメを使用したマイメイク投稿はありません。</p>
    {% endif %}
  </div>
</div>
<a href="{% url 'my_cosmetics' %}" class="back-button">マイコスメ画面へ</a>
{% endblock %}
