{% extends 'base.html' %}

{% block title %}
メイク詳細
{% endblock %}

{% block content %}
<h1>{{ my_make.make_name }}</h1>

<div>
  <h2>メインコスメ:</h2>
  <p>{{ main_cosmetic }}</p>
</div>

<div>
  <h2>他使用コスメ:</h2>
  <ul>
    {% for cosmetic in other_cosmetics %}
      <li>{{ cosmetic.cosmetic.cosmetic_name }}</li>
    {% endfor %}
  </ul>

  <!-- 他使用コスメを選択するフォーム -->
  <form action="{% url 'update_other_cosmetics' my_make.pk %}" method="post">
    {% csrf_token %}
    <select name="other_cosmetics" multiple>
      {% for cosmetic in all_cosmetics %}
        <option value="{{ cosmetic.pk }}" 
          {% if cosmetic.pk in other_cosmetic_ids %}selected{% endif %}>
          {{ cosmetic.cosmetic_name }}
        </option>
      {% endfor %}
    </select>
    <button type="submit">更新</button>
  </form>
</div>

<p>メイクメモ: {{ my_make.make_memo }}</p>
<p>作成日: {{ my_make.created_at }}</p>
<div>
  <h2>写真:</h2>
  <img src="{{ my_make.image.url }}" alt="メイク画像">
</div>

<footer>
    {% if my_make.user == request.user %}
        <button onclick="location.href='{% url 'my_make_post' my_make.pk %}'">編集</button>
        <form action="{% url 'delete_my_make' my_make.pk %}" method="post" style="display:inline;">
            {% csrf_token %}
            <button type="submit">削除</button>
        </form>
    {% endif %}
</footer>
{% endblock %}



