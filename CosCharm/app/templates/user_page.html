{% extends 'base.html' %}

{% block title %}
{{ user_profile.username }}のページ
{% endblock %}

{% block content %}
<div class="user-profile">
    <div class="profile-info">
        <img src="{{ user_profile.profile_image.url }}" alt="ユーザー画像" class="small-image">
        <h2>{{ user_profile.username }}</h2>
        <p>年齢: {{ user_profile.age }}</p>
        <p>性別: {{ user_profile.gender }}</p>
        <p>肌質: {{ user_profile.skin_type }}</p>
        <p>パーソナルカラー: {{ user_profile.personal_color }}</p>
    </div>
    <div class="follow-buttons">
        <a href="{% url 'follower_list' user_profile.id %}">フォロワー: {{ user_profile.followers.count }}</a>
        <a href="{% url 'following_list' user_profile.id %}">フォロー中: {{ user_profile.following.count }}</a>
        {% if is_following %}
            <form method="POST" action="{% url 'unfollow' user_profile.id %}">
                {% csrf_token %}
                <button type="submit">フォロー解除</button>
            </form>
        {% else %}
            <form method="POST" action="{% url 'follow' user_profile.id %}">
                {% csrf_token %}
                <button type="submit">フォローする</button>
            </form>
        {% endif %}
    </div>
</div>

<div class="my-make-list">
    <h3>投稿したマイメイク</h3>
    <div class="make-grid">
        {% for make in my_make_list %}
        <div class="make-item">
            <a href="{% url 'my_make_detail' make.id %}">
                <img src="{{ make.image.url }}" alt="{{ make.make_name }}" class="small-image">
                <p>{{ make.make_name }}</p>
            </a>
            <footer>
                {% if make.user == request.user %}
                    <div class="action-links">
                        <a href="{% url 'my_make_post' make.id %}" class="edit-link">編集</a>
                        <a href="{% url 'delete_my_make' make.id %}" class="delete-link">削除</a>
                    </div>
                {% endif %}
            </footer>
        </div>
        {% endfor %}
    </div>
</div>

<style>
.small-image {
    width: 100px; /* 希望の幅に調整 */
    height: auto; /* アスペクト比を維持 */
}

.action-links {
    display: flex;
    justify-content: flex-end;
    gap: 10px;
}

.edit-link, .delete-link {
    text-decoration: none;
    padding: 5px 10px;
    border-radius: 5px;
}

.edit-link {
    background-color: #4CAF50;
    color: white;
}

.delete-link {
    background-color: #f44336;
    color: white;
}

.edit-link:hover, .delete-link:hover {
    opacity: 0.8;
}
</style>
{% endblock %}

